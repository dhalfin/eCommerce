{"ast":null,"code":"var _jsxFileName = \"D:\\\\pcs_frontend\\\\khalfin_dinar_pcs_frontend_21_01_homeworks\\\\project\\\\src\\\\pages\\\\shop.jsx\";\nimport React from 'react';\nimport ShopSidebar from '../components/ShopSidebar/cat_product_left';\nimport { connect } from 'react-redux';\nimport { updateCart, updateSum, updateOnPageShopFilter, colorFilterUpdater, currentCategoryUpdater } from '../store/action_creatores';\nimport { Link } from 'react-router-dom';\nimport * as URL from '../router/url';\nimport Spinner from \"../components/spinner\";\nimport cartIcon from '../assets/img/core-img/cart.png';\nimport fullCartIcon from '../assets/img/core-img/fullCart.png';\nimport DropDown from '../components/dropdown/DropDown';\nimport Paginator from '../components/Shop/paginator';\nimport * as PropTypes from 'prop-types';\nimport Demo from '../components/Ranking/rating';\nShopPage.propTypes = {\n  cart: PropTypes.array,\n  catalog: PropTypes.array,\n  catalogLoading: PropTypes.bool,\n  match: PropTypes.object,\n  pagination: PropTypes.string,\n  itemsOnPage: PropTypes.string,\n  priceFilter: PropTypes.array,\n  sum: PropTypes.number,\n  updateCart: PropTypes.func,\n  updateOnPageShopFilter: PropTypes.func,\n  updateItemOnPage: PropTypes.func,\n  updateSortOnPage: PropTypes.func,\n  updateSum: PropTypes.func,\n  currentCategoryFilter: PropTypes.string,\n  currentCategoryUpdater: PropTypes.func\n};\n\nfunction ShopPage(props) {\n  const {\n    cart,\n    catalog,\n    catalogLoading,\n    match,\n    pagination,\n    itemsOnPage,\n    priceFilter,\n    sum,\n    updateCart,\n    updateOnPageShopFilter,\n    updateSum,\n    currentCategoryFilter,\n    currentCategoryUpdater\n  } = props;\n  const startItem = Number(pagination) * Number(itemsOnPage) + 1;\n  let endItem = 1;\n  let cartItemStatus;\n  let cartPict;\n  let startPoint = 1;\n  let startIndicator = Number(pagination) * Number(itemsOnPage) + 1;\n  let endIndicator = startIndicator + Number(itemsOnPage) - 1;\n  let filteredCatalog = [];\n  updateOnPageShopFilter(true);\n\n  function handleAddToCart(e) {\n    if (!cart.find(elem => elem.item === e.target.name)) {\n      cart.push({\n        item: e.target.name,\n        amount: 1\n      });\n      updateCart(cart);\n      updateSum(Number(e.target.getAttribute(\"price\")) + Number(sum));\n      localStorage.setItem(`cartInfo`, JSON.stringify(cart));\n    }\n\n    ;\n  }\n\n  ;\n\n  function renderItemData() {\n    if (catalogLoading) {\n      return /*#__PURE__*/React.createElement(Spinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }\n      });\n    }\n\n    ;\n\n    if (match.params.code !== currentCategoryFilter && match.params.code !== undefined) {\n      currentCategoryUpdater(match.params.code);\n    }\n\n    ;\n\n    if (catalog && catalog.length) {\n      for (let i = 0; i < catalog.length; i++) {\n        let item = catalog[i];\n\n        if (item.category === currentCategoryFilter && priceFilter[0] <= item.price && priceFilter[1] >= item.price) {\n          startPoint++;\n\n          if (startPoint > startItem && endItem <= Number(itemsOnPage)) {\n            endItem++;\n            filteredCatalog.push(item);\n          }\n\n          ;\n        }\n\n        ;\n      }\n\n      ;\n    }\n\n    ;\n\n    if (catalog && catalog.length) {\n      return filteredCatalog.map(item => {\n        for (let i = 0; i < cart.length; i++) {\n          if (!cart.find(elem => elem.item === item.id)) {\n            cartItemStatus = \"\";\n            cartPict = false;\n          } else {\n            cartItemStatus = \" IN YOUR CART!\";\n            cartPict = true;\n          }\n\n          ;\n        }\n\n        ;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-12 col-sm-6 col-md-12 col-xl-6\",\n          key: item.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"single-product-wrapper\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"product-img\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          className: \"App-link\",\n          to: `${URL.PRODUCT}/${item.id}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: `http://test-api.ipromote.ru/img/${item.img_url}`,\n          alt: \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 34\n          }\n        }))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"product-description d-flex align-items-center justify-content-between\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"product-meta-data\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"line\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"product-price\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 37\n          }\n        }, \"$\", item.price), /*#__PURE__*/React.createElement(\"h6\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          className: \"App-link\",\n          to: `${URL.PRODUCT}/${item.id}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 41\n          }\n        }, item.title))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"ratings-cart text-right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(Demo, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 37\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cart\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          \"data-toggle\": \"tooltip\",\n          \"data-placement\": \"left\",\n          title: \"Add to Cart\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          onClick: handleAddToCart,\n          name: item.id,\n          src: !cartPict ? cartIcon : fullCartIcon,\n          price: item.price,\n          alt: item.title,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 45\n          }\n        }), /*#__PURE__*/React.createElement(\"span\", {\n          style: {\n            color: \"#ed0345\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 45\n          }\n        }, cartItemStatus)))))));\n      });\n    }\n\n    ;\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ShopSidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"amado_product_area section-padding-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-topbar d-xl-flex align-items-end justify-content-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"total-products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 37\n    }\n  }, \"Showing \", startIndicator, \"-\", endIndicator)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-sorting d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(DropDown, {\n    title: \"Sort by\",\n    name: \"sortBy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(DropDown, {\n    title: \"View\",\n    name: \"View\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 37\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 21\n    }\n  }, renderItemData()), /*#__PURE__*/React.createElement(Paginator, {\n    itemCode: currentCategoryFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }\n  }))));\n}\n\n;\n\nconst mapStateToProps = store => {\n  return {\n    itemsOnPage: store.app.itemsOnPage,\n    sum: store.app.sum,\n    catalog: store.app.catalog.data,\n    catalogLoading: store.app.isLoading.catalog || false,\n    cart: store.app.cart,\n    priceFilter: store.app.priceFilter,\n    pagination: store.app.pagination,\n    colorFilterUpdater: store.app.colorFilterUpdater,\n    currentCategoryFilter: store.app.currentCategoryFilter\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    updateCart: e => dispatch(updateCart(e)),\n    updateSum: e => dispatch(updateSum(e)),\n    updateOnPageShopFilter: bool => dispatch(updateOnPageShopFilter(bool)),\n    colorFilterUpdater: string => dispatch(colorFilterUpdater(string)),\n    currentCategoryUpdater: string => dispatch(currentCategoryUpdater(string))\n  };\n};\n\nexport default React.memo(connect(mapStateToProps, mapDispatchToProps)(ShopPage));","map":{"version":3,"sources":["D:/pcs_frontend/khalfin_dinar_pcs_frontend_21_01_homeworks/project/src/pages/shop.jsx"],"names":["React","ShopSidebar","connect","updateCart","updateSum","updateOnPageShopFilter","colorFilterUpdater","currentCategoryUpdater","Link","URL","Spinner","cartIcon","fullCartIcon","DropDown","Paginator","PropTypes","Demo","ShopPage","propTypes","cart","array","catalog","catalogLoading","bool","match","object","pagination","string","itemsOnPage","priceFilter","sum","number","func","updateItemOnPage","updateSortOnPage","currentCategoryFilter","props","startItem","Number","endItem","cartItemStatus","cartPict","startPoint","startIndicator","endIndicator","filteredCatalog","handleAddToCart","e","find","elem","item","target","name","push","amount","getAttribute","localStorage","setItem","JSON","stringify","renderItemData","params","code","undefined","length","i","category","price","map","id","PRODUCT","img_url","title","color","mapStateToProps","store","app","data","isLoading","mapDispatchToProps","dispatch","memo"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ShopSidebar from '../components/ShopSidebar/cat_product_left';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n    updateCart,\r\n    updateSum,\r\n    updateOnPageShopFilter,\r\n    colorFilterUpdater,\r\n    currentCategoryUpdater,\r\n} from '../store/action_creatores';\r\nimport { Link } from 'react-router-dom';\r\nimport * as URL from '../router/url';\r\nimport Spinner from \"../components/spinner\";\r\nimport cartIcon from '../assets/img/core-img/cart.png';\r\nimport fullCartIcon from '../assets/img/core-img/fullCart.png';\r\nimport DropDown from '../components/dropdown/DropDown';\r\nimport Paginator from '../components/Shop/paginator';\r\nimport * as PropTypes from 'prop-types';\r\nimport Demo from '../components/Ranking/rating';\r\n\r\nShopPage.propTypes = {\r\n    cart: PropTypes.array,\r\n    catalog: PropTypes.array,\r\n    catalogLoading: PropTypes.bool,\r\n    match: PropTypes.object,\r\n    pagination: PropTypes.string,\r\n    itemsOnPage: PropTypes.string,\r\n    priceFilter: PropTypes.array,\r\n    sum: PropTypes.number,\r\n    updateCart: PropTypes.func,\r\n    updateOnPageShopFilter: PropTypes.func,\r\n    updateItemOnPage: PropTypes.func,\r\n    updateSortOnPage: PropTypes.func,\r\n    updateSum: PropTypes.func,\r\n    currentCategoryFilter: PropTypes.string,\r\n    currentCategoryUpdater: PropTypes.func,\r\n};\r\n\r\nfunction ShopPage(props) {\r\n\r\n    const {\r\n        cart,\r\n        catalog,\r\n        catalogLoading,\r\n        match,\r\n        pagination,\r\n        itemsOnPage,\r\n        priceFilter,\r\n        sum,\r\n        updateCart,\r\n        updateOnPageShopFilter,\r\n        updateSum,\r\n        currentCategoryFilter,\r\n        currentCategoryUpdater,\r\n    } = props;\r\n\r\n    const startItem = Number(pagination) * Number(itemsOnPage) + 1;\r\n    let endItem = 1;\r\n    let cartItemStatus;\r\n    let cartPict;\r\n    let startPoint = 1;\r\n    let startIndicator = Number(pagination) * Number(itemsOnPage) + 1;\r\n    let endIndicator = startIndicator + Number(itemsOnPage) - 1;\r\n    let filteredCatalog = [];\r\n\r\n    updateOnPageShopFilter(true);\r\n\r\n    function handleAddToCart(e) {\r\n        if (!cart.find(elem => elem.item === e.target.name)) {\r\n            cart.push({ item: e.target.name, amount: 1 });\r\n            updateCart(cart);\r\n            updateSum(Number(e.target.getAttribute(\"price\")) + Number(sum));\r\n            localStorage.setItem(`cartInfo`, JSON.stringify(cart));\r\n        };\r\n    };\r\n\r\n    function renderItemData() {\r\n        if (catalogLoading) {\r\n            return (<Spinner />);\r\n        };\r\n\r\n        if (match.params.code !== currentCategoryFilter && match.params.code !== undefined) {\r\n            currentCategoryUpdater(match.params.code);\r\n        };\r\n\r\n        if (catalog && catalog.length) {\r\n            for (let i = 0; i < catalog.length; i++) {\r\n                let item = catalog[i];\r\n                if (\r\n                    item.category === currentCategoryFilter && priceFilter[0] <= item.price && priceFilter[1] >= item.price\r\n                ) {\r\n                    startPoint++;\r\n                    if (startPoint > startItem && endItem <= Number(itemsOnPage)\r\n                    ) {\r\n                        endItem++;\r\n                        filteredCatalog.push(item);\r\n                    };\r\n                };\r\n            };\r\n        };\r\n\r\n        if (catalog && catalog.length) {\r\n\r\n            return filteredCatalog.map((item) => {\r\n                for (let i = 0; i < cart.length; i++) {\r\n                    if (!cart.find(elem => elem.item === item.id)) {\r\n                        cartItemStatus = \"\";\r\n                        cartPict = false;\r\n                    } else {\r\n                        cartItemStatus = \" IN YOUR CART!\";\r\n                        cartPict = true;\r\n                    };\r\n                };\r\n\r\n                return (\r\n                    <div className=\"col-12 col-sm-6 col-md-12 col-xl-6\"\r\n                        key={item.id}\r\n                    >\r\n                        <div className=\"single-product-wrapper\">\r\n                            <div className=\"product-img\">\r\n                                <Link\r\n                                    className=\"App-link\"\r\n                                    to={`${URL.PRODUCT}/${item.id}`}\r\n                                ><img src={`http://test-api.ipromote.ru/img/${item.img_url}`} alt=\"\" /></Link>\r\n                            </div>\r\n\r\n\r\n                            <div className=\"product-description d-flex align-items-center justify-content-between\">\r\n                                <div className=\"product-meta-data\">\r\n                                    <div className=\"line\"></div>\r\n                                    <p className=\"product-price\">${item.price}</p>\r\n                                    <h6><Link className=\"App-link\" to={`${URL.PRODUCT}/${item.id}`} >{item.title}</Link></h6>\r\n                                </div>\r\n                                <div className=\"ratings-cart text-right\">\r\n                                    {/*<div className=\"ratings\">*/}\r\n                                    {/*    <i className=\"fa fa-star\" aria-hidden=\"true\"></i>*/}\r\n                                    {/*    <i className=\"fa fa-star\" aria-hidden=\"true\"></i>*/}\r\n                                    {/*    <i className=\"fa fa-star\" aria-hidden=\"true\"></i>*/}\r\n                                    {/*    <i className=\"fa fa-star\" aria-hidden=\"true\"></i>*/}\r\n                                    {/*    <i className=\"fa fa-star\" aria-hidden=\"true\"></i>*/}\r\n                                    {/*</div>*/}\r\n                                    <Demo />\r\n                                    <div className=\"cart\">\r\n                                        <div\r\n                                            data-toggle=\"tooltip\"\r\n                                            data-placement=\"left\"\r\n                                            title=\"Add to Cart\"\r\n                                        >\r\n\r\n                                            {/* cart icon */}\r\n                                            <img\r\n                                                onClick={handleAddToCart}\r\n                                                name={item.id}\r\n                                                src={!cartPict ? cartIcon : fullCartIcon}\r\n                                                price={item.price}\r\n                                                alt={item.title}\r\n                                            />\r\n\r\n                                            {/* already in the cart */}\r\n                                            <span style={{ color: \"#ed0345\" }}>\r\n                                                {cartItemStatus}\r\n                                            </span>\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })\r\n        };\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <ShopSidebar />\r\n            <div className=\"amado_product_area section-padding-100\">\r\n                <div className=\"container-fluid\">\r\n\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <div className=\"product-topbar d-xl-flex align-items-end justify-content-between\">\r\n                                <div className=\"total-products\">\r\n\r\n                                    <p>Showing {startIndicator}-{endIndicator}</p>\r\n\r\n                                </div>\r\n                                <div className=\"product-sorting d-flex\">\r\n\r\n                                    <DropDown\r\n                                        title=\"Sort by\"\r\n                                        name=\"sortBy\"\r\n                                    />\r\n\r\n                                    <DropDown\r\n                                        title=\"View\"\r\n                                        name=\"View\"\r\n                                    />\r\n\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"row\">\r\n                        {\r\n                            renderItemData()\r\n                        }\r\n                    </div>\r\n\r\n                    <Paginator itemCode={currentCategoryFilter} />\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        itemsOnPage: store.app.itemsOnPage,\r\n        sum: store.app.sum,\r\n        catalog: store.app.catalog.data,\r\n        catalogLoading: store.app.isLoading.catalog || false,\r\n        cart: store.app.cart,\r\n        priceFilter: store.app.priceFilter,\r\n        pagination: store.app.pagination,\r\n        colorFilterUpdater: store.app.colorFilterUpdater,\r\n        currentCategoryFilter: store.app.currentCategoryFilter,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        updateCart: (e) => dispatch(updateCart(e)),\r\n        updateSum: (e) => dispatch(updateSum(e)),\r\n        updateOnPageShopFilter: (bool) => dispatch(updateOnPageShopFilter(bool)),\r\n        colorFilterUpdater: (string) => dispatch(colorFilterUpdater(string)),\r\n        currentCategoryUpdater: (string) => dispatch(currentCategoryUpdater(string)),\r\n    };\r\n};\r\n\r\nexport default React.memo(connect(mapStateToProps, mapDispatchToProps)(ShopPage));"]},"metadata":{},"sourceType":"module"}